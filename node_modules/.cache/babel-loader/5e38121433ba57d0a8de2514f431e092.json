{"ast":null,"code":"var _jsxFileName = \"/Users/delaram/Desktop/messenger-react-class/messenger-react/src/component/messenger/msgList.js\";\nimport React from 'react';\nimport './../../css/chat.css';\nimport Conversation from './../messenger/conversation';\nimport Fab from '@material-ui/core/Fab';\nimport AddIcon from '@material-ui/icons/Add';\nimport { createNewConversation } from './../../action/convAction';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport { conversationShow } from './../../action/convAction';\nimport { creatConversationPage } from './../../action/convAction';\n\nclass List extends React.Component {\n  constructor() {\n    super();\n\n    this.handleContact = id => {\n      const fdata = new FormData();\n      fdata.append('token', this.state.token);\n      fdata.append('user_id', id);\n      fdata.append('size', 4);\n      axios.post('https://api.paywith.click/conversation/', fdata).then(response => {\n        console.log('Contact:', response.data);\n      }).catch(function (error) {\n        console.log('ContactError:', error);\n      });\n    };\n\n    this.handleOpenConversation = cid => {\n      const fdata = new FormData();\n      fdata.append('token', this.state.token);\n      fdata.append('conversation_id', cid);\n      fdata.append('size', 10);\n      axios.post('https://api.paywith.click/conversation/details/', fdata).then(response => {\n        console.log('details::', response.data);\n        this.props.dispatch(creatConversationPage(response.data.data.conversation_id));\n      }).catch(function (error) {\n        console.log('detailsError::', error);\n      });\n    };\n\n    this.handleCreate = cid => {\n      const fdata = new FormData();\n      fdata.append('token', this.state.token);\n      fdata.append('conversation_id', cid);\n      fdata.append('text', text);\n      fdata.append('size', 8);\n      axios.post('https://api.paywith.click/conversation/create/', fdata).then(response => {\n        console.log('create::', response.data);\n      }).catch(function (error) {\n        console.log('createError::', error);\n      });\n    };\n\n    this.state = {\n      newConv: '',\n      suggestionUsers: [],\n      token: window.localStorage.getItem('token'),\n      conversation_id: window.localStorage.getItem('conversation_id')\n    };\n  }\n\n  handleClick() {\n    this.props.dispatch(createNewConversation(this.state.newConv));\n    this.setState({\n      newConv: ''\n    });\n  }\n\n  handleSearch(e) {\n    const fdata = new FormData();\n    fdata.append('token', this.state.token);\n    fdata.append('query', e.target.value);\n    fdata.append('size', 4);\n    axios.post('https://api.paywith.click/explore/search/contacts/', fdata).then(response => {\n      console.log('dataaaaa:', response.data);\n      this.setState({\n        suggestionUsers: response.data.data.users\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  componentDidMount() {\n    axios.get('https://api.paywith.click/conversation/', {\n      params: {\n        token: this.state.token\n      }\n    }).then(response => {\n      console.log('from componentDidMount ::', response.data.data);\n      this.props.dispatch(conversationShow(response.data.data.conversation_details));\n    }).catch(function (error) {\n      console.log(error);\n    }).then(function () {// always executed\n    });\n  }\n\n  render() {\n    console.log('hhhhhh', this.props.conversationList);\n    return React.createElement(\"div\", {\n      className: \"list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"searchbar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"search\",\n      placeholder: \"Search...\",\n      onChange: e => this.handleSearch(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }), React.createElement(Fab, {\n      size: \"small\",\n      color: \"secondary\",\n      \"aria-label\": \"add\",\n      onClick: () => this.handleClick(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(AddIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }))), this.state.suggestionUsers.map((user, index) => {\n      return React.createElement(\"p\", {\n        className: \"contacts\",\n        key: user.id,\n        onClick: () => this.handleContact(user.id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, user.email);\n    }), this.props.conversationList.map((item, index) => item.users.map((user, idx) => user.id != window.localStorage.getItem('user_id') && React.createElement(Conversation, {\n      key: idx,\n      name: user.email,\n      onClick: () => this.handleOpenConversation(item.cid),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  conversationList: state.conversationList\n});\n\nconst mapDispatchToProps = dispatch => ({\n  dispatch: dispatch\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(List);","map":{"version":3,"sources":["/Users/delaram/Desktop/messenger-react-class/messenger-react/src/component/messenger/msgList.js"],"names":["React","Conversation","Fab","AddIcon","createNewConversation","connect","axios","conversationShow","creatConversationPage","List","Component","constructor","handleContact","id","fdata","FormData","append","state","token","post","then","response","console","log","data","catch","error","handleOpenConversation","cid","props","dispatch","conversation_id","handleCreate","text","newConv","suggestionUsers","window","localStorage","getItem","handleClick","setState","handleSearch","e","target","value","users","componentDidMount","get","params","conversation_details","render","conversationList","map","user","index","email","item","idx","mapStateToProps","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React from 'react'\nimport './../../css/chat.css'\nimport Conversation from './../messenger/conversation'\nimport Fab from '@material-ui/core/Fab'\nimport AddIcon from '@material-ui/icons/Add'\nimport { createNewConversation } from './../../action/convAction'\nimport { connect } from 'react-redux'\nimport axios from 'axios'\nimport { conversationShow } from './../../action/convAction'\nimport { creatConversationPage } from './../../action/convAction'\n\nclass List extends React.Component {\n  constructor () {\n    super()\n    this.state = {\n      newConv: '',\n      suggestionUsers: [],\n      token: window.localStorage.getItem('token'),\n      conversation_id: window.localStorage.getItem('conversation_id')\n      \n    }\n  }\n\n  handleClick () {\n    this.props.dispatch(createNewConversation(this.state.newConv))\n    this.setState({ newConv: '' })\n  }\n\n  handleSearch (e) {\n    const fdata = new FormData()\n    fdata.append('token', this.state.token)\n    fdata.append('query', e.target.value)\n    fdata.append('size', 4)\n\n    axios.post('https://api.paywith.click/explore/search/contacts/', fdata)\n      .then((response) => {\n        console.log('dataaaaa:', response.data)\n        this.setState({ suggestionUsers: response.data.data.users })\n      })\n      .catch(function (error) {\n        console.log(error)\n      })\n  }\n\n  componentDidMount () {\n    axios.get('https://api.paywith.click/conversation/', {\n      params: {\n        token: this.state.token\n      }\n    })\n      .then((response) => {\n        console.log('from componentDidMount ::', response.data.data)\n        this.props.dispatch(conversationShow(response.data.data.conversation_details))\n      })\n      .catch(function (error) {\n        console.log(error)\n      })\n      .then(function () {\n        // always executed\n      })\n  }\n\n  handleContact = (id) => {\n    const fdata = new FormData()\n    fdata.append('token', this.state.token)\n    fdata.append('user_id',id)\n    fdata.append('size', 4)\n\n    axios.post('https://api.paywith.click/conversation/', fdata) \n\n      .then((response) => {\n        console.log('Contact:', response.data)\n      })\n      .catch(function (error) {\n        console.log('ContactError:',error)\n      })\n  }\n\n  handleOpenConversation = (cid) => {\n\n    const fdata = new FormData()\n    fdata.append('token', this.state.token)\n    fdata.append('conversation_id', cid)\n    fdata.append('size', 10)\n\n    axios.post('https://api.paywith.click/conversation/details/', fdata) \n\n      .then((response) => {\n        console.log('details::', response.data)\n        this.props.dispatch(creatConversationPage(response.data.data.conversation_id))\n      })\n      .catch(function (error) {\n        console.log('detailsError::', error)\n      })\n  }\n\n\n  handleCreate = (cid) => {\n    const fdata = new FormData()\n    fdata.append('token', this.state.token)\n    fdata.append('conversation_id', cid)\n    fdata.append('text', text)\n    fdata.append('size', 8)\n\n    axios.post('https://api.paywith.click/conversation/create/', fdata) \n\n      .then((response) => {\n        console.log('create::', response.data)\n\n      })\n      .catch(function (error) {\n        console.log('createError::', error)\n      })\n  }\n\n  render () {\n    console.log('hhhhhh',this.props.conversationList)\n    return (\n      <div className='list'>\n        <div className='searchbar'>\n          <input type='text' className='search' placeholder='Search...' onChange={(e) => this.handleSearch(e)} />\n          <Fab size='small' color='secondary' aria-label='add' onClick={() => this.handleClick()}>\n            <AddIcon />\n          </Fab>\n        </div>\n        {\n          this.state.suggestionUsers.map((user, index) => {\n            return (\n              <p \n              className='contacts' \n              key={user.id} \n              onClick={() => this.handleContact(user.id)}>\n              {user.email}\n              </p>\n            )\n          })\n        }\n\n        \n        {this.props.conversationList.map((item, index) => (\n          item.users.map((user,idx) => (\n            user.id != window.localStorage.getItem('user_id') &&\n            <Conversation\n            key={idx}\n            name={user.email}\n            onClick={() => this.handleOpenConversation(item.cid)}\n          />\n          )\n          \n          )\n            \n        )\n        )}\n\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  conversationList: state.conversationList\n})\nconst mapDispatchToProps = (dispatch) => ({\n  dispatch: dispatch\n})\nexport default connect(mapStateToProps, mapDispatchToProps)(List)\n"]},"metadata":{},"sourceType":"module"}